!function(t){var e=function(e,i){var n=this;n.id=e,n.options=i,this.init=function(){var e=t("#lqd-popup");this.options.slice(),e.hide(),t("#liquid-import-emoj").hide(),e.hide(),t(document.body).append(_.template(t("#tmpl-demo-import-modules").html())({modules:this.options}));var a,l,r,d=new FormData;d.append("action","ocdi_import_demo_data"),d.append("selected",2),d.append("selections",i),n.options.forEach(e=>t("#liquid_"+e).css("display","inline-flex")),a=n.options,l=n.id,a[r=0]&&o("liquid_"+a[a.length-a.length],a,l,function(){a[++r]&&o("liquid_"+a[r],a,l,function(){a[++r]&&o("liquid_"+a[r],a,l,function(){a[++r]&&o("liquid_"+a[r],a,l,function(){a[++r]&&o("liquid_"+a[r],a,l,function(){a[++r]&&o("liquid_"+a[r],a,l)})})})})})},this.init()};function i(){var e,i,n,o,a;return t.ajax({url:ajaxurl,type:"GET",data:{action:"liquid_total_imported"}}).done(function(l){return e=parseInt(l.match(/(?:(?!\|).)*/i)[0]),l.indexOf("|")?(o=l.substring(0,l.indexOf("|")),a=l.replace(o,"")):a=e,a.match(/(\d+)(?!.*\d)/i)?(i=parseInt(a.match(/(\d+)(?!.*\d)/i)[0]),n=parseInt(100*i/e)):n=parseInt("100"),t("#lqd-loader").parent().css("width",n-1+"%"),t("#lqd-loader").text(n-1+"%"),!1}),!1}function n(){return t.ajax({url:ajaxurl,type:"GET",data:{action:"liquid_progress_imported"}}).done(function(e){return t("#liquid-progress").text(e),!1}),!1}function o(e,o,a,l){var r,d;r=setInterval(i,5e3),t.ajax({url:ajaxurl,type:"POST",data:{action:e,demo:a,content:t("#lqd-imp-all").is(":checked")?1:0,media:t("#lqd-imp-media").is(":checked")?1:0},beforeSend:function(i){t.ajax({url:ajaxurl,type:"POST",data:{action:"liquid_reset_logs"}}),t("#"+e).toggleClass("importing"),d=setInterval(n,5e3)},success:function(t){},complete:function(){"function"!=typeof l||e.match("undefined")||l(),t("#"+e).toggleClass("importing imported"),clearInterval(r),clearInterval(d)}}).done(function(){if("liquid_"+o[o.length-1]===e){clearInterval(r),clearInterval(d);var i=t("#liquid-popup");if(t("#lqd-loader").parent().css("min-width","100%"),t("#lqd-loader").text("100%"),setTimeout(function(){t("#liquid-import-emoj").show(),t("#lqd-progress-popup").hide(),t("#liquid-progress").hide(),setTimeout(function(){i.remove()},1e4)},800),jQuery.post(ajaxurl,{action:"hub_cache_purge"},function(t){console.log(t)}),"undefined"!=typeof merlin_params){var n=window.location.href;n=n.replace("content","ready"),window.location.href=n,localStorage.removeItem("liquid_setup_builder")}return!1}})}function a(e){t.ajax({url:ajaxurl,type:"POST",data:{action:"liquid_reset_wp"},beforeSend:function(){t("#liquid-demo-loader").addClass("is-active")}}).done(function(i){t("#liquid-demo-loader").removeClass("is-active"),"function"==typeof e&&e()})}function l(i){var n=t("#lqd-popup");n.on("click",".lqd-imp-popup-close",function(){n.remove()}),n.on("click",".agree",function(){var e=t(this),i=e.parent();e.is(":checked")?i.addClass("checked"):i.removeClass("checked")}),n.on("click",".lqd-import-btn",function(){var n=t(this),o=[];n.parent().parent().find("#lqd-import-opts .lqd-imp-opt :checked").each(function(){o.push(t(this).val())}),new e(i,o,i)})}var r={init:function(){this.oneCollectionLazyLoad(),this.initTabs(),this.filterDemos("wpbakery"),this.initDemo(),this.initIconpicker(),this.initLightboxTrigger()},initDemo:function(){t(".lqd-solid-wrap").on("click",".lqd-import-popup",function(){if(!t(".liquid-error-message").length){var e=t(this).data("demo-id"),i=liquid_demos[e];return t(this).attr("data-import-id"),t.ajax({url:ajaxurl,type:"GET",data:{action:"liquid_prepare_demo_package",demo:e},beforeSend:function(){t("#liquid-demo-loader").addClass("is-active")}}).done(function(n){var o=JSON.parse(n);if(1===o.stat)t.ajax({url:ajaxurl,type:"POST",data:{action:"liquid_require_plugins",demo:e}}).done(function(n){if(t("#liquid-demo-loader").removeClass("is-active"),1==(ret=JSON.parse(n)).stat)t(document.body).append(_.template(t("#tmpl-demo-popup").html())(i)),l(e);else if(0==ret.stat){var o;message=message="Please install/activate <strong>"+ret.plugins.toString()+"</strong>","function"==typeof(o=function(){t.confirm({title:"Missing Required Plugins",content:message,buttons:{new:{text:"Back to Install Plugins",action:function(){if("undefined"!=typeof merlin_params){var t=window.location.href;t=t.replace("content","plugins"),window.location.href=t}else{var t=window.location.href;t=t.replace("liquid-import-demos","liquid-plugins"),window.location.href=t}}},confirm:{text:"I understand, let's import, please",btnClass:"btn-blue",keys:["enter","shift"],action:function(){t(document.body).append(_.template(t("#tmpl-demo-popup").html())(i)),l(e)}}}})})&&o()}});else{t("#liquid-demo-loader").removeClass("is-active");var a="Error:",r="Please, Activate Hub Core plugin";0===o.stat&&null!=o.message&&(a="Error",r=o.message),t.confirm({title:a,content:r,buttons:{confirm:{text:"Ok",btnClass:"btn-blue",keys:["enter","shift"],action:function(){}},cancel:function(){}}})}}),!1}})},oneCollectionLazyLoad:function(){var t=document.querySelectorAll(".vc_ui-template");t.length>=0&&t.forEach(t=>{new IntersectionObserver(([t],e)=>{let i=t.target,n=i.querySelector("img");t.isIntersecting&&(n.src=n.getAttribute("data-src"),n.classList.add("img-loaded"),e.unobserve(t.target))}).observe(t)})},initIconpicker:function(){t.isFunction(t.fn.fontIconPicker)&&t(".liquid-icon-picker").fontIconPicker()},initTabs:function(){let e=localStorage.getItem("liquid_setup_builder"),i=t("#lqd-demos"),n=t(".lqd-tab-nav",i),o=t("a",n),a=t(".merlin__builder-buttons"),l=t(".merlin__builder--elementor, .merlin__builder--vc",a);e&&(i.length&&this.filterDemos({$demosContainer:i,$navLinks:o},e),a.length&&("wpbakery"===e?l.filter((t,e)=>e.classList.contains("merlin__builder--vc")).trigger("click"):"elementor"===e&&l.filter((t,e)=>e.classList.contains("merlin__builder--elementor")).trigger("click"))),o.on("click",e=>{e.preventDefault(),e.stopPropagation();let n=t(e.target),a=n.attr("data-filter");this.filterDemos({$demosContainer:i,$navLinks:o},a)})},filterDemos({$demosContainer:e,$navLinks:i},n){if(!e||!i||!n)return;let o=t(".lqd-tab-content",e),a=t(".lqd-col",o);i.removeClass("active").filter((e,i)=>t(i).attr("data-filter")===n).addClass("active"),a.hide().filter((t,e)=>e.classList.contains(n)).show()},initLightboxTrigger(){let e=t("[data-lqd-dsd-lightbox]");e.each((e,i)=>{let n=t(i),o=t(n.attr("data-lqd-dsd-lightbox")),a=t(o);if(a.length){let l=a.find("iframe");n.on("click",t=>{t.preventDefault(),t.stopPropagation(),a[0].showModal(),l.attr("src",l.attr("data-src"))})}})}};jQuery(document).ready(function(){r.init()}),jQuery(document).ajaxComplete(function(t){r.initIconpicker()})}(jQuery);